<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Beauty WebApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 16px; }
    input, select, button { width: 100%; padding: 12px; margin-top: 8px; font-size: 16px; }
    .box { border: 1px solid #eee; border-radius: 12px; padding: 12px; margin-top: 12px; }
  </style>
</head>

<body>
  <h2>üìÖ –ó–∞–ø–∏—Å—å –≤ —Å–∞–ª–æ–Ω</h2>

  <div class="box">
    <div id="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram...</div>

    <label>–£—Å–ª—É–≥–∞</label>
    <select id="service">
      <option value="–ú–∞–Ω–∏–∫—é—Ä">–ú–∞–Ω–∏–∫—é—Ä</option>
      <option value="–ü–µ–¥–∏–∫—é—Ä">–ü–µ–¥–∏–∫—é—Ä</option>
      <option value="–°—Ç—Ä–∏–∂–∫–∞">–°—Ç—Ä–∏–∂–∫–∞</option>
      <option value="–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ">–û–∫—Ä–∞—à–∏–≤–∞–Ω–∏–µ</option>
    </select>

    <label>–ò–º—è</label>
    <input id="name" placeholder="–í–∞—à–µ –∏–º—è">

    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
    <input id="phone" placeholder="+7..." type="tel">

    <button id="send">‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
  </div>

  <script>
    const statusEl = document.getElementById("status");

    // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã–ª–∏ –Ω–µ –∫–∞–∫ WebApp (–Ω–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É —É –±–æ—Ç–∞) ‚Äî Telegram.WebApp –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
    if (!window.Telegram || !window.Telegram.WebApp) {
      statusEl.innerText = "‚ùå –û—Ç–∫—Ä—ã—Ç–æ –Ω–µ –∫–∞–∫ Mini App. –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –±–æ—Ç–∞ /start.";
    } else {
      const tg = window.Telegram.WebApp;
      tg.ready();
      tg.expand();
      statusEl.innerText = "‚úÖ WebApp –ø–æ–¥–∫–ª—é—á—ë–Ω. –ù–∞–∂–º–∏—Ç–µ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É¬ª.";

      // –ü–æ–¥—Å—Ç–∞–≤–∏–º –∏–º—è –∏–∑ Telegram
      const user = tg.initDataUnsafe?.user;
      if (user?.first_name) document.getElementById("name").value = user.first_name;

      document.getElementById("send").onclick = () => {
        const payload = {
          service: document.getElementById("service").value,
          name: document.getElementById("name").value.trim(),
          phone: document.getElementById("phone").value.trim()
        };

        if (!payload.name || !payload.phone) {
          alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");
          return;
        }

        tg.sendData(JSON.stringify(payload)); // <-- –í–û–¢ –≠–¢–û –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –±–æ—Ç–∞
      };
    }
  </script>
</body>
</html>
